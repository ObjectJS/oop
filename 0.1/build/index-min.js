/*! oop - v0.1 - 2013-09-05 2:44:41 PM
* Copyright (c) 2013 goto100; Licensed  */
KISSY.add("gallery/oop/0.1/index",function(){function a(a){return{__class__:arguments.callee,__func__:a}}function b(a){return{__class__:arguments.callee,__func__:a}}function c(a,b){var c={__class__:arguments.callee,fget:a,fset:b};return c}function d(){}function e(a){return f(a.__metaclass__,i)?"type":typeof a}function f(a,b){if("function"!=typeof b)throw new Error("bad arguments.");var c;if("function"!=typeof a)return a instanceof b;if(c=a.__class__)do if(c===b)return!0;while(c=c.__base__);return!1}function g(a,b){if(l){var c;0==b.indexOf("__")&&b.lastIndexOf("__")!=b.length-2&&(c=a[b],Object.defineProperty(a,b,{get:function(){return this.constructor.prototype.hasOwnProperty(b)?c:void 0},set:function(a){c=a}}))}}function h(a){var b,c,d=a.__class__,e=arguments.callee.caller.__name__;if(!e)throw new Error("parent call error");for(;d&&!d.prototype.hasOwnProperty(e);)d=d.__base__;if(b=d.__base__,!b)throw new Error("base class not found in parent call");var f=!1;if(b[e]?c=b[e]:b.prototype[e]&&(c=b.prototype[e],f=!0),!c||!c.apply)throw new Error("method not found in parent call");return f?c.apply(a,Array.prototype.slice.call(arguments,1)):c.apply(b,arguments)}function i(){}function j(){var a=arguments,b=a.length;if(1>b)throw new Error("bad arguments");var c=null,d=b>1?a[0]:Object;if("function"!=typeof d&&"object"!=typeof d)throw new Error("base is not function or object");var e,f=a[b-1];if("function"!=typeof f&&"object"!=typeof f)throw new Error("constructor is not function or object");f instanceof Function&&(e=f,f={},e.call(f));var g=f.__metaclass__||d.__metaclass__||i,h=g.__new__(g,c,d,f);if(!h||"function"!=typeof h)throw new Error("__new__ method should return cls");return g.prototype.initialize.call(h,c,d,f),h}var k={},l=!0;try{Object.defineProperty({},"a",{value:1})}catch(m){l=!1}Object.keys||(Object.keys=function(a){var b=[];if(void 0===a||null===a)return b;for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b}),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){for(var c=0;c<this.length;c++)a.call(b,this[c],c,this)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(a===this[b])return b;return-1}),Function.prototype.bind||(Function.prototype.bind=function(a){var b=this,c=Array.prototype.slice.call(arguments,1);return function(){return b.apply(a,c.concat(Array.prototype.slice.call(arguments)))}});var n=l?function(a){return this[a]}:function(a){return this["__"+a+"_get"]()},o=l?function(a,b){return this[a]=b}:function(a,b){return this["__"+a+"_set"](b)};a.setTo=function(a,b,c){var d=a.prototype;c.__func__.__name__=b,d[b]=c.__func__},b.setTo=function(a,b,c){var d=a.prototype;a[b]=d[b]=c.__func__},c.setTo=function(a,b,c){var d=a.prototype;c.enumerable=!0;var e=a.__metaclass__.prototype.__defaultmethodtype__;c.fget&&(e.setTo(a,"__"+b+"_get",e(c.fget)),c.get=function(){return this["__"+b+"_get"]()}),c.fset&&(e.setTo(a,"__"+b+"_set",e(c.fset)),c.set=function(a){return this["__"+b+"_set"](a)}),d.__properties__[b]=c,l&&Object.defineProperty(d,b,c)},d.setTo=function(a,b,c){var d=a.prototype;a[b]=d[b]=c},i.__class__=i,i.setTo=function(a,b,c){a[b]=a.prototype[b]=c},i.__new__=function(a,c,d,f){var g=function(){if(!p){this.__class__=g;var a=this.initialize?this.initialize.apply(this,arguments):null;return a}},h=Object.__new__(d);g.prototype=h,g.prototype.constructor=g,g.prototype.__properties__={};for(var i in a.prototype)g[i]=a.prototype[i];return Object.keys(d).forEach(function(a){(0!=a.indexOf("__")||a.lastIndexOf("__")==a.length-2)&&(g[a]=d[a])}),g.__base__=d,g.__class__=a,g.__metaclass__=a,g.__dict__={},(f.__mixins__||[]).reverse().forEach(function(c){for(var d=[c],f=c;f=f.__base__;)d.unshift(f);d.forEach(function(c){var d,f;c.__dict__?d=c.__dict__:(d={},f=c.prototype,Object.keys(f).forEach(function(a){d[a]="function"==e(f[a])?b(f[a]):f[a]})),Object.keys(d).forEach(function(b){a.prototype.__setattr__.call(g,b,d[b])})})}),Object.keys(f).forEach(function(b){a.prototype.__setattr__.call(g,b,f[b])}),g.prototype.get=n,g.prototype.set=o,delete f,g},i.prototype.initialize=function(){},i.prototype.__setattr__=function(a,c){var e,f=this,h=f.prototype;f.__dict__[a]=c,"__new__"==a&&(c=b(c)),void 0!=c?(c.__class__||"function"!=typeof c||(c=f.__metaclass__.prototype.__defaultmethodtype__(c)),e=c.__class__||d):e=d,e.setTo(f,a,c),g(h,a)},i.prototype.__defaultmethodtype__=a;var p=!1;return Object.__new__=function(a){if(Object.create)return Object.create(a.prototype);p=!0;var b=new a;return p=!1,b},k.Class=j,k.Type=i,k.staticmethod=b,k.property=c,k.parent=h,k.instanceOf=f,k.typeOf=e,k.install=function(a){a||(a=global),["Class","Type","classmethod","staticmethod","property"].forEach(function(b){a[b]=k[b]})},k});